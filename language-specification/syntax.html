<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Groovy 中文文档</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/groovy-chinese/favicon.ico">
    <script async="true" type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279042755&amp;web_id=1279042755"></script>
    <script async="true" type="text/javascript" src="https://hm.baidu.com/hm.js?c400d319a39a68ea6a3732c9dcd9073d"></script>
    <meta name="description" content="Groovy 中文文档">
    <link rel="preload" href="/groovy-chinese/assets/css/0.styles.accc0ed8.css" as="style"><link rel="preload" href="/groovy-chinese/assets/js/app.88613846.js" as="script"><link rel="preload" href="/groovy-chinese/assets/js/2.a885f705.js" as="script"><link rel="preload" href="/groovy-chinese/assets/js/7.95b99c1c.js" as="script"><link rel="prefetch" href="/groovy-chinese/assets/js/3.b0f3191f.js"><link rel="prefetch" href="/groovy-chinese/assets/js/4.a9d64fd8.js"><link rel="prefetch" href="/groovy-chinese/assets/js/5.8dde6af7.js"><link rel="prefetch" href="/groovy-chinese/assets/js/6.c3fe8a5b.js"><link rel="prefetch" href="/groovy-chinese/assets/js/8.a7de6e53.js">
    <link rel="stylesheet" href="/groovy-chinese/assets/css/0.styles.accc0ed8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/groovy-chinese/" class="home-link router-link-active"><!----> <span class="site-name">Groovy 中文文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/groovy-chinese/getting-started/download-groovy.html" class="nav-link">
  快速开始
</a></div><div class="nav-item"><a href="/groovy-chinese/language-specification/syntax.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  文档
</a></div> <a href="https://github.com/juzi214032/groovy-chinese" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/groovy-chinese/getting-started/download-groovy.html" class="nav-link">
  快速开始
</a></div><div class="nav-item"><a href="/groovy-chinese/language-specification/syntax.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  文档
</a></div> <a href="https://github.com/juzi214032/groovy-chinese" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/groovy-chinese/language-specification/syntax.html" aria-current="page" class="active sidebar-link">语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_1-注释" class="sidebar-link">1. 注释</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_1-1-单行注释" class="sidebar-link">1.1. 单行注释</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_1-2-多行注释" class="sidebar-link">1.2 多行注释</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_1-3-groovydoc-注释" class="sidebar-link">1.3 Groovydoc 注释</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_1-4-shebang-line" class="sidebar-link">1.4 Shebang Line</a></li></ul></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_2-关键字" class="sidebar-link">2. 关键字</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_3-标识符" class="sidebar-link">3. 标识符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_3-1-普通标识符" class="sidebar-link">3.1 普通标识符</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_3-2-引用标识符" class="sidebar-link">3.2 引用标识符</a></li></ul></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-string" class="sidebar-link">4. String</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-1-单引号字符串" class="sidebar-link">4.1 单引号字符串</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-2-连接字符串" class="sidebar-link">4.2 连接字符串</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-3-三个单引号的字符串" class="sidebar-link">4.3 三个单引号的字符串</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-4-双引号字符串" class="sidebar-link">4.4 双引号字符串</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-5-三个双引号的字符串" class="sidebar-link">4.5 三个双引号的字符串</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-6-斜杠字符串" class="sidebar-link">4.6 斜杠字符串</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-7-美元符斜杠字符串" class="sidebar-link">4.7 美元符斜杠字符串</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-8-字符串总结" class="sidebar-link">4.8 字符串总结</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_4-9-字符" class="sidebar-link">4.9 字符</a></li></ul></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_5-number" class="sidebar-link">5. Number</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_5-1-整数" class="sidebar-link">5.1 整数</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_5-2-小数" class="sidebar-link">5.2 小数</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_5-3-下划线" class="sidebar-link">5.3 下划线</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_5-4-数字类型后缀" class="sidebar-link">5.4 数字类型后缀</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_5-5-数学运算" class="sidebar-link">5.5 数学运算</a></li></ul></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_6-boolean" class="sidebar-link">6. Boolean</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_7-list" class="sidebar-link">7. List</a></li><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_8-arrays" class="sidebar-link">8. Arrays</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/groovy-chinese/language-specification/syntax.html#_8-1-java-风格的数组初始化" class="sidebar-link">8.1  Java 风格的数组初始化</a></li></ul></li></ul></li><li><a href="/groovy-chinese/unfinished.html" class="sidebar-link">操作符</a></li><li><a href="/groovy-chinese/unfinished.html" class="sidebar-link">程序结构</a></li><li><a href="/groovy-chinese/unfinished.html" class="sidebar-link">对象导向</a></li><li><a href="/groovy-chinese/unfinished.html" class="sidebar-link">闭包</a></li><li><a href="/groovy-chinese/unfinished.html" class="sidebar-link">语义</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>本章介绍 Groovy 编程语言的语法。该语言的语法来源于 Java 语法，但用 Groovy 的特定结构对其进行了增强，并允许进行某些简化。</p> <h2 id="_1-注释"><a href="#_1-注释" class="header-anchor">#</a> 1. 注释</h2> <h3 id="_1-1-单行注释"><a href="#_1-1-单行注释" class="header-anchor">#</a> 1.1. 单行注释</h3> <p>单行注释使用<code>//</code>。在<code>//</code>后面的字符，直到行尾，都被认为是注释的一部分。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">// 这是单行注释</span>
println <span class="token string gstring">&quot;hello&quot;</span> <span class="token comment">// 这也是单行注释</span>
</code></pre></div><h3 id="_1-2-多行注释"><a href="#_1-2-多行注释" class="header-anchor">#</a> 1.2 多行注释</h3> <p>多行注释以<code>/*</code>开头，<code>/*</code>后面的字符被视为注释的一部分，包括换行符，直到第一个<code>*/</code>结束注释。因此，多行注释可以放在语句的末尾，甚至可以放在语句内部。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">/* 多行注释
   可以跨越两行 */</span>
println <span class="token string gstring">&quot;hello&quot;</span> <span class="token comment">/* 多行注释
                   也可以放在行尾 */</span>
println <span class="token number">1</span> <span class="token comment">/* 一 */</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token comment">/* 二 */</span>
</code></pre></div><h3 id="_1-3-groovydoc-注释"><a href="#_1-3-groovydoc-注释" class="header-anchor">#</a> 1.3 Groovydoc 注释</h3> <p>与多行注释类似，Groovydoc 注释也是多行的，但以<code>/**</code>开始，以<code>*/</code>结束。在第一行 Groovydoc 注释之后的行可以选择以星号<code>*</code>开头。这些注释与以下内容相关联。</p> <ul><li>类型定义（classes, interfaces, enums, annotations）</li> <li>变量和属性定义</li> <li>方法定义</li></ul> <p>即时你不写 Groovydoc 编译器也不会报错，但是出于代码规范的目的，你也应该在这些定义之前加上 Groovydoc 注释。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">/**
 * Class 描述
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token comment">/** 一个人的名字 */</span>
    String name

    <span class="token comment">/**
     * 向一个人问好
     *
     * @param otherPerson 需要问好的人
     * @return 欢迎语
     */</span>
    String <span class="token function">greet</span><span class="token punctuation">(</span>String otherPerson<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token string gstring">&quot;Hello <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>otherPerson<span class="token punctuation">}</span></span>&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Groovydoc 与 Java 的 Javadoc 遵循相同的约定。所以你可以使用和 Javadoc 一样的标签。</p> <p>此外，Groovy 从 3.0.0 开始支持 Runtime Groovydoc，即 Groovydoc 可以在运行时保留。</p> <p>运行时 Groovydoc 默认是禁用的。可以通过添加 JVM 选项 <code>Dgroovy.attach.runtime.groovydoc=true</code>开启。</p> <p>运行时 Groovydoc 以<code>/**@</code>开头，以<code>*/</code>结尾。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">/**@
 * Foo类的描述
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token comment">/**@
     * bar() 方法的描述
     */</span>
    <span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">assert</span> Foo<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span>groovydoc<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'Some class groovydoc for Foo'</span><span class="token punctuation">)</span> 
<span class="token keyword">assert</span> Foo<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>groovydoc<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'Some method groovydoc for bar'</span><span class="token punctuation">)</span> 
</code></pre></div><ul><li>第 11 行：运行时获取 Foo 类的 Groovydoc</li> <li>第 12 行：运行时获取 bar() 方法的 Groovydoc</li></ul> <h3 id="_1-4-shebang-line"><a href="#_1-4-shebang-line" class="header-anchor">#</a> 1.4 Shebang Line</h3> <p>除了单行注释之外，还有一个特殊的注释，通常被 UNIX 系统理解为 Shebang Line，它允许脚本直接从命令行运行。前提是你已经安装了 Groovy 发行版，并且在 PATH 中配置了 Groovy。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token shebang comment">#!/usr/bin/env groovy</span>
println <span class="token string gstring">&quot;Hello from the shebang line&quot;</span>
</code></pre></div><p><code>#</code>字符必须是文件的第一个字符。任何缩进都会产生编译错误。</p> <blockquote><p>关于 Shebang，据说是来源于，Sharp 和 bang 两个单词的合并；Sharp 代表乐谱中的‘升号’，这个符号和‘井号’，长得一样；而 bang 这个词，则代表‘砰的一声’，之所以用它来表示‘！’，则是出自于漫画，因为漫画中，巨大声响后面都有个‘！’号。</p></blockquote> <h2 id="_2-关键字"><a href="#_2-关键字" class="header-anchor">#</a> 2. 关键字</h2> <p>下述列表是 Groovy 语言的所有关键字</p> <table><thead><tr><th style="text-align:center;">as</th> <th style="text-align:center;">assert</th> <th style="text-align:center;">break</th> <th style="text-align:center;">case</th> <th style="text-align:center;">catch</th> <th style="text-align:center;">class</th></tr></thead> <tbody><tr><td style="text-align:center;">const</td> <td style="text-align:center;">continue</td> <td style="text-align:center;">def</td> <td style="text-align:center;">default</td> <td style="text-align:center;">do</td> <td style="text-align:center;">else</td></tr> <tr><td style="text-align:center;">enum</td> <td style="text-align:center;">extends</td> <td style="text-align:center;">false</td> <td style="text-align:center;">finally</td> <td style="text-align:center;">for</td> <td style="text-align:center;">goto</td></tr> <tr><td style="text-align:center;">if</td> <td style="text-align:center;">implents</td> <td style="text-align:center;">import</td> <td style="text-align:center;">in</td> <td style="text-align:center;">instanceof</td> <td style="text-align:center;">interface</td></tr> <tr><td style="text-align:center;">new</td> <td style="text-align:center;">null</td> <td style="text-align:center;">package</td> <td style="text-align:center;">return</td> <td style="text-align:center;">super</td> <td style="text-align:center;">switch</td></tr> <tr><td style="text-align:center;">this</td> <td style="text-align:center;">throw</td> <td style="text-align:center;">throws</td> <td style="text-align:center;">trait</td> <td style="text-align:center;">true</td> <td style="text-align:center;">try</td></tr> <tr><td style="text-align:center;">var</td> <td style="text-align:center;">while</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr></tbody></table> <h2 id="_3-标识符"><a href="#_3-标识符" class="header-anchor">#</a> 3. 标识符</h2> <h3 id="_3-1-普通标识符"><a href="#_3-1-普通标识符" class="header-anchor">#</a> 3.1 普通标识符</h3> <p>标识符以字母、``$<code>或</code>_`开头，不能以数字开头。</p> <p>字母可在以下范围内：</p> <ul><li><code>a</code> to <code>z</code> （小写 ascii 字符）</li> <li><code>A</code> to <code>Z</code> （大写 ascii 字符）</li> <li><code>\u00C0</code> to <code>\u00D6</code></li> <li><code>\u00D8</code> to <code>\u00F6</code></li> <li><code>\u00F8</code> to <code>\u00FF</code></li> <li><code>\u0100</code> to <code>\uFFFE</code></li></ul> <p>字母之后的字符可以包含数字</p> <p>下面是几个有效标识符的例子（在这里是变量名）：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> name
<span class="token keyword">def</span> item3
<span class="token keyword">def</span> with_underscore
<span class="token keyword">def</span> <span class="token punctuation">$</span>dollarStart
</code></pre></div><p>以下的都是无效的标识符：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> 3tier
<span class="token keyword">def</span> a<span class="token operator">+</span>b
<span class="token keyword">def</span> a#b
</code></pre></div><p>以<code>.</code>开头的标识符也是有效的：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>foo<span class="token punctuation">.</span><span class="token keyword">as</span>
foo<span class="token punctuation">.</span><span class="token keyword">assert</span>
foo<span class="token punctuation">.</span><span class="token keyword">break</span>
foo<span class="token punctuation">.</span><span class="token keyword">case</span>
foo<span class="token punctuation">.</span><span class="token keyword">catch</span>
</code></pre></div><h3 id="_3-2-引用标识符"><a href="#_3-2-引用标识符" class="header-anchor">#</a> 3.2 引用标识符</h3> <p>引用标识符出现在<code>.</code>表达式后面，例如<code>person.name</code>表达式的<code>name</code>的部分可以使用<code>person.'name'</code>或者<code>person.&quot;name&quot;</code>的表示。有个值得注意的地方是，一些在 Java 中不能使用的非法字符（例如破折号、空格、感叹号等字符）是可以在 Groovy 中使用的。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> map <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

map<span class="token punctuation">.</span><span class="token string gstring">&quot;an identifier with a space and double quotes&quot;</span> <span class="token operator">=</span> <span class="token string gstring">&quot;ALLOWED&quot;</span>
map<span class="token punctuation">.</span><span class="token string">'with-dash-signs-and-single-quotes'</span> <span class="token operator">=</span> <span class="token string gstring">&quot;ALLOWED&quot;</span>

<span class="token keyword">assert</span> map<span class="token punctuation">.</span><span class="token string gstring">&quot;an identifier with a space and double quotes&quot;</span> <span class="token operator">==</span> <span class="token string gstring">&quot;ALLOWED&quot;</span>
<span class="token keyword">assert</span> map<span class="token punctuation">.</span><span class="token string">'with-dash-signs-and-single-quotes'</span> <span class="token operator">==</span> <span class="token string gstring">&quot;ALLOWED&quot;</span>
</code></pre></div><p>正如我们在下面关于字符串的章节中所看到的，Groovy 提供了不同的字符串字元。实际上，所有类型的字符串都可以在点后使用。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>map<span class="token punctuation">.</span><span class="token string">'single quote'</span>
map<span class="token punctuation">.</span><span class="token string gstring">&quot;double quote&quot;</span>
map<span class="token punctuation">.</span><span class="token string">'''triple single quote'''</span>
map<span class="token punctuation">.</span><span class="token string gstring">&quot;&quot;&quot;triple double quote&quot;&quot;&quot;</span>
map<span class="token punctuation">.</span><span class="token string regex">/slashy string/</span>
map<span class="token punctuation">.</span><span class="token string gstring">$/dollar slashy string/$</span>
</code></pre></div><p>简单字符串和 Groovy 的 GStrings （插值字符串）是有区别的，因为在后者的情况下，内插值被插入到最终的字符串中，用于计算整个变量。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> firstname <span class="token operator">=</span> <span class="token string gstring">&quot;Homer&quot;</span>
map<span class="token punctuation">.</span><span class="token string gstring">&quot;Simpson-<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>firstname<span class="token punctuation">}</span></span>&quot;</span> <span class="token operator">=</span> <span class="token string gstring">&quot;Homer Simpson&quot;</span>

<span class="token keyword">assert</span> map<span class="token punctuation">.</span><span class="token string">'Simpson-Homer'</span> <span class="token operator">==</span> <span class="token string gstring">&quot;Homer Simpson&quot;</span>
</code></pre></div><h2 id="_4-string"><a href="#_4-string" class="header-anchor">#</a> 4. String</h2> <p>文本以一串字符的形式表示，称为字符串。Groovy 允许你实例化<code>java.lang.String</code>对象，以及GStrings（<code>groovy.lang.GString</code>），GStrings 在其他编程语言中也被称为插值字符串。</p> <h3 id="_4-1-单引号字符串"><a href="#_4-1-单引号字符串" class="header-anchor">#</a> 4.1 单引号字符串</h3> <p>单引号字符串是由单引号包围的一系列字符：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token string">'一个单引号字符串'</span>
</code></pre></div><p>单引号字符串是普通的<code>java.lang.String</code>，不支持插值。</p> <h3 id="_4-2-连接字符串"><a href="#_4-2-连接字符串" class="header-anchor">#</a> 4.2 连接字符串</h3> <p>所有的 Groovy 字符串都可以用<code>+</code>操作符进行连接：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">assert</span> <span class="token string">'ab'</span> <span class="token operator">==</span> <span class="token string">'a'</span> <span class="token operator">+</span> <span class="token string">'b'</span>
</code></pre></div><h3 id="_4-3-三个单引号的字符串"><a href="#_4-3-三个单引号的字符串" class="header-anchor">#</a> 4.3 三个单引号的字符串</h3> <p>三个单引号字符串是指由三个单引号包围的一系列字符。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token string">'''这是一个三个单引号包围的字符串'''</span>
</code></pre></div><p>三个单引号的字符串是普通的<code>java.lang.String</code>，不支持插值。</p> <p>三个单引号的字符串可以跨越多行。字符串的内容可以跨越行边界，而不需要将字符串分割成几段，也不需要<code>+</code>连接或换行符：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> aMultilineString <span class="token operator">=</span> <span class="token string">'''第一行
第二行
第三行'''</span>
</code></pre></div><p>如果你的代码有缩进，例如在一个类的方法体中，你的字符串将包含缩进的空白字符。GDK(Groovy Development Kit)  中包含了<code>String#stripIndent()</code>方法和<code>String#stripMargin()</code>方法，这两个方法可以去除缩进，<code>String#stripMargin()</code>方法使用一个定界符来标识需要从哪里开始删除字符串的空白字符。</p> <p>当创建一个字符串时，如下所示：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> startingAndEndingWithANewline <span class="token operator">=</span> <span class="token string">'''
第一行
第二行
第三行
'''</span>
</code></pre></div><p>你会注意到，生成的字符串包含一个换行符作为第一个字符。可以通过用反斜杠转义来删除该字符：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> strippedFirstNewline <span class="token operator">=</span> <span class="token string">'''\
第一行
第二行
第三行
'''</span>

<span class="token keyword">assert</span> <span class="token operator">!</span>strippedFirstNewline<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-3-1-转义特殊字符"><a href="#_4-3-1-转义特殊字符" class="header-anchor">#</a> 4.3.1 转义特殊字符</h4> <p>你可以用反斜杠字符转义单引号，以避免被识别为字符串的边界：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token string">'an escaped single quote: \' needs a backslash'</span>
</code></pre></div><p>还可以使用双斜杠来转义 转义字符 本身：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token string">'an escaped escape character: \\ needs a double backslash'</span>
</code></pre></div><p>一些特殊字符可以通过转义得到</p> <table><thead><tr><th style="text-align:center;"></th> <th style="text-align:center;"></th> <th style="text-align:center;"></th></tr></thead> <tbody><tr><td style="text-align:center;">转义字符</td> <td style="text-align:center;">含义</td> <td style="text-align:center;">注释</td></tr> <tr><td style="text-align:center;">\b</td> <td style="text-align:center;">backspace</td> <td style="text-align:center;">回退符</td></tr> <tr><td style="text-align:center;">\f</td> <td style="text-align:center;">formfeed</td> <td style="text-align:center;">换页符</td></tr> <tr><td style="text-align:center;">\n</td> <td style="text-align:center;">newline</td> <td style="text-align:center;">换行符</td></tr> <tr><td style="text-align:center;">\r</td> <td style="text-align:center;">carriage return</td> <td style="text-align:center;">回车符</td></tr> <tr><td style="text-align:center;">\s</td> <td style="text-align:center;">single space</td> <td style="text-align:center;">单引号</td></tr> <tr><td style="text-align:center;">\t</td> <td style="text-align:center;">tabulation</td> <td style="text-align:center;">制表符</td></tr> <tr><td style="text-align:center;">\</td> <td style="text-align:center;">backslash</td> <td style="text-align:center;">斜杠</td></tr> <tr><td style="text-align:center;">\'</td> <td style="text-align:center;">single quote within a single-quoted string</td> <td style="text-align:center;">单引号字符串包含单引号时使用</td></tr> <tr><td style="text-align:center;">\&quot;</td> <td style="text-align:center;">double quote within a double-quoted string</td> <td style="text-align:center;">双引号字符串包含双引号时使用</td></tr></tbody></table> <p>当后面涉及到其他类型的字符串时，我们会看到一些更多的转义细节。</p> <h4 id="_4-3-2-unicode-转义"><a href="#_4-3-2-unicode-转义" class="header-anchor">#</a> 4.3.2 Unicode 转义</h4> <p>​	对于键盘上没有的字符，你可以使用 Unicode 转义字符串。Unicode 格式是：一个反斜杠，后面是<code>u</code>，然后是4个十六进制数字。</p> <p>例如，欧元货币符号可以用以下方式表示：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token string">'The Euro currency symbol: \u20AC'</span>
</code></pre></div><h3 id="_4-4-双引号字符串"><a href="#_4-4-双引号字符串" class="header-anchor">#</a> 4.4 双引号字符串</h3> <p>双引号字符串是由双引号包围的一系列字符：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token string gstring">&quot;a double-quoted string&quot;</span>
</code></pre></div><p>如果没有插值表达式，双引号字符串是普通的<code>java.lang.String</code>，但如果存在插值，则是<code>groovy.lang.GString</code>实例。</p> <p>要转义双引号，可以使用反斜杠字符：<code>&quot;一个双引号字符: \&quot;&quot;.</code></p> <h4 id="_4-4-1-字符串插值"><a href="#_4-4-1-字符串插值" class="header-anchor">#</a> 4.4.1 字符串插值</h4> <p>除了单引号和三引号字符串外，任何 Groovy 表达式都可以在所有字符串字面中进行插值。插值是指在计算字符串时，用其值替换字符串中的占位符的行为。占位符表达式由<code>${}</code>包围。对于不明确的点号表达式，大括号可以省略，也就是说，在这些情况下，我们可以只使用<code>$</code>前缀。如果 GString 被传递给一个取字符串的方法，占位符中的表达式值将被计算为其字符串表示形式（通过调用该表达式上的<code>oString()</code>），并将得到的字符串传递给该方法。</p> <p>一个引用了本地变量的占位符字符串，如下所示：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> name <span class="token operator">=</span> <span class="token string">'Guillaume'</span> <span class="token comment">// a plain string</span>
<span class="token keyword">def</span> greeting <span class="token operator">=</span> <span class="token string gstring">&quot;Hello <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span>&quot;</span>

<span class="token keyword">assert</span> greeting<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'Hello Guillaume'</span>
</code></pre></div><p>任何Groovy表达式都是有效的，在这个例子中我们可以看到一个算术表达式：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> sum <span class="token operator">=</span> <span class="token string gstring">&quot;The sum of 2 and 3 equals <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">}</span></span>&quot;</span>
<span class="token keyword">assert</span> sum<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'The sum of 2 and 3 equals 5'</span>
</code></pre></div><p><code>${}</code>占位符之间除了可以使用表达式外，还可以使用语句。但是，语句的值会被计算为<code>null</code>。因此，如果在该占位符中插入了几个语句，最后一个语句应该以某种方式返回一个有意义的值来插入。例如，<code>1 和 2 之和等于 ${def a = 1; def b = 2; a + b}</code>是被支持的，并且可以正常工作，但是一个好的做法通常是在 GString 占位符中只使用简单的表达式。</p> <p>除了<code>${}</code>占位符之外，我们还可以在点表达式前使用一个单独的 <code>$</code> 符号：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> person <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">:</span> <span class="token string">'Guillaume'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">36</span><span class="token punctuation">]</span>
<span class="token keyword">assert</span> <span class="token string gstring">&quot;<span class="token expression"><span class="token punctuation">$</span>person<span class="token punctuation">.</span>name</span> is <span class="token expression"><span class="token punctuation">$</span>person<span class="token punctuation">.</span>age</span> years old&quot;</span> <span class="token operator">==</span> <span class="token string">'Guillaume is 36 years old'</span>
</code></pre></div><p>但只有<code>a.b</code>、<code>a.b.c</code>等形式的点表达式才有效。包含小括号的表达式，如方法调用、用于闭合的大括号、不属于属性表达式的点或算术运算符都是无效的。以下给出一个数字的变量定义：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token function">shouldFail</span><span class="token punctuation">(</span>MissingPropertyException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    println <span class="token string gstring">&quot;<span class="token expression"><span class="token punctuation">$</span>number<span class="token punctuation">.</span>toString</span>()&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>$number.toString()</code>被解析器解释为<code>${number.toString}()</code>。</p> <p>同样，如果表达方式有歧义，你需要保留大括号：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>String thing <span class="token operator">=</span> <span class="token string">'treasure'</span>
<span class="token keyword">assert</span> <span class="token string">'The x-coordinate of the treasure is represented by treasure.x'</span> <span class="token operator">==</span>
    <span class="token string gstring">&quot;The x-coordinate of the <span class="token expression"><span class="token punctuation">$</span>thing</span> is represented by <span class="token expression"><span class="token punctuation">$</span>thing<span class="token punctuation">.</span>x</span>&quot;</span>   <span class="token comment">// &lt;= 不允许，因为有歧义</span>
<span class="token keyword">assert</span> <span class="token string">'The x-coordinate of the treasure is represented by treasure.x'</span> <span class="token operator">==</span>
        <span class="token string gstring">&quot;The x-coordinate of the <span class="token expression"><span class="token punctuation">$</span>thing</span> is represented by <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>thing<span class="token punctuation">}</span></span>.x&quot;</span>  <span class="token comment">// &lt;= 必须保留大括号</span>
</code></pre></div><p>如果你需要转义 GString 中的<code>$</code>或<code>${}</code>占位符，使它们能直接显示出来，你只需要使用一个反斜线字符来转义<code>$</code>符号：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">assert</span> <span class="token string">'$5'</span> <span class="token operator">==</span> <span class="token string gstring">&quot;\$5&quot;</span>
<span class="token keyword">assert</span> <span class="token string">'${name}'</span> <span class="token operator">==</span> <span class="token string gstring">&quot;\${name}&quot;</span>
</code></pre></div><h4 id="_4-4-2-插值表达式的特殊情况"><a href="#_4-4-2-插值表达式的特殊情况" class="header-anchor">#</a> 4.4.2 插值表达式的特殊情况</h4> <p>到目前为止，我们已经看到我们可以在 <code>${}</code> 占位符内插入任意表达式，但是闭包表达式有一个特殊的情况和符号。当占位符中包含一个箭头<code>${-&gt;}</code>时，该表达式实际上是一个闭包表达式。你可以把它看作是一个前面加了一个<code>$</code>符号的闭包：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> sParameterLessClosure <span class="token operator">=</span> <span class="token string gstring">&quot;1 + 2 == <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token operator">-&gt;</span> <span class="token number">3</span><span class="token punctuation">}</span></span>&quot;</span> <span class="token comment">// 注释 1</span>
<span class="token keyword">assert</span> sParameterLessClosure <span class="token operator">==</span> <span class="token string">'1 + 2 == 3'</span>

<span class="token keyword">def</span> sOneParamClosure <span class="token operator">=</span> <span class="token string gstring">&quot;1 + 2 == <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span> w <span class="token operator">-&gt;</span> w <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">}</span></span>&quot;</span> <span class="token comment">// 注释 2</span>
<span class="token keyword">assert</span> sOneParamClosure <span class="token operator">==</span> <span class="token string">'1 + 2 == 3'</span>
</code></pre></div><ul><li>注释 1 ：该闭包是一个不接受参数的无参数闭包。</li> <li>注释 2 ：在这里，闭包需要一个单一的<code>java.io.StringWriter</code>参数，你可以用<code>&lt;&lt;</code>操作符来追加内容。无论哪种情况，两个占位符都是嵌入式闭包。</li></ul> <p>从表面上看，它像是用一种比较啰嗦的定义表达式的方式来进行插值，但闭包比单纯的表达式有一个重要的优势：惰性求值。</p> <p>让我们看看以下例子：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> number <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 注释 1</span>
<span class="token keyword">def</span> eagerGString <span class="token operator">=</span> <span class="token string gstring">&quot;value == <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span>&quot;</span>
<span class="token keyword">def</span> lazyGString <span class="token operator">=</span> <span class="token string gstring">&quot;value == <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span> <span class="token operator">-&gt;</span> number <span class="token punctuation">}</span></span>&quot;</span>

<span class="token keyword">assert</span> eagerGString <span class="token operator">==</span> <span class="token string gstring">&quot;value == 1&quot;</span> <span class="token comment">// 注释 2</span>
<span class="token keyword">assert</span> lazyGString <span class="token operator">==</span>  <span class="token string gstring">&quot;value == 1&quot;</span> <span class="token comment">// 注释 3</span>

number <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// 注释 4</span>
<span class="token keyword">assert</span> eagerGString <span class="token operator">==</span> <span class="token string gstring">&quot;value == 1&quot;</span> <span class="token comment">// 注释 5</span>
<span class="token keyword">assert</span> lazyGString <span class="token operator">==</span>  <span class="token string gstring">&quot;value == 2&quot;</span> <span class="token comment">// 注释 6</span>
</code></pre></div><ul><li>注释 1 ：我们定义了一个值为 1 的 number 变量，然后在两个 GString 中进行插值，<code>eagerGString</code>使用普通表达式，<code>lazyGString</code>使用闭包表达式</li> <li>注释 2 ：我们希望<code>eagerGString</code>中的<code>number</code>值为 1</li> <li>注释 3 ：对 <code>lazyGString</code>也是一样的</li> <li>注释 4 ：然后，我们将变量的值改为一个新的数字</li> <li>注释 5 ：如果是普通的插值表达式，那么在创建 GString 的时候，这个值实际上已经被固定了</li> <li>注释 6 ：但如果是使用闭包表达式的话，每次修改变量值时都会调用闭包，其字符串值也会进行更新。</li></ul> <p>嵌入式闭包表达式如果接收一个以上的参数，会在运行时产生异常。因此只闭包表达式只能接收零或一个参数。</p> <h4 id="_4-4-3-与-java-的互操作性"><a href="#_4-4-3-与-java-的互操作性" class="header-anchor">#</a> 4.4.3 与 Java 的互操作性</h4> <p>当一个方法（不管是在 Java 还是 Groovy 中实现的）期望一个<code>java.lang.String</code>，但我们传递的是<code>groovy.lang.GString</code>实例时，GString 的<code>toString()</code>方法会被隐式调用。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>String <span class="token function">takeString</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment">// 注释 4</span>
    <span class="token keyword">assert</span> message <span class="token keyword">instanceof</span> <span class="token class-name">String</span>        <span class="token comment">// 注释 5</span>
    <span class="token keyword">return</span> message
<span class="token punctuation">}</span>

<span class="token keyword">def</span> message <span class="token operator">=</span> <span class="token string gstring">&quot;The message is <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token string">'hello'</span><span class="token punctuation">}</span></span>&quot;</span>   <span class="token comment">// 注释 1</span>
<span class="token keyword">assert</span> message <span class="token keyword">instanceof</span> <span class="token class-name">GString</span>           <span class="token comment">// 注释 2</span>

<span class="token keyword">def</span> result <span class="token operator">=</span> <span class="token function">takeString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>            <span class="token comment">// 注释 3</span>
<span class="token keyword">assert</span> result <span class="token keyword">instanceof</span> <span class="token class-name">String</span>
<span class="token keyword">assert</span> result <span class="token operator">==</span> <span class="token string">'The message is hello'</span>
</code></pre></div><ul><li>注释 1 ：创建一个 GString 变量</li> <li>注释 2：检查它是一个 GString 变量</li> <li>注释 3 ：然后将该 GString 传递给一个以 String 为参数的方法</li> <li>注释 4 ：<code>takeString()</code>方法的定义明确表示它的唯一参数是一个字符串</li> <li>注释 5：验证了参数确实是一个字符串，而不是一个 GString</li></ul> <h4 id="_4-4-4-gstring-和-string-hashcodes"><a href="#_4-4-4-gstring-和-string-hashcodes" class="header-anchor">#</a> 4.4.4 GString 和 String hashCodes</h4> <p>虽然插值字符串可以代替 Java 字符串，但它们与字符串有一个特殊的区别：它们的 hashCodes 不同。Java 字符串是不可改变的，而 GString 的结果 String 表示可以根据其插值的不同而变化。即使对于相同的结果字符串，GStrings 和 Strings 的HashCode 也不一样。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">assert</span> <span class="token string gstring">&quot;one: <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string gstring">&quot;one: 1&quot;</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>GString 和 Strings 具有不同的 hashCode 值，因此应该避免使用 GString 作为 Map Key，特别是当我们试图用 String 而不是 GString 来检索关联值时。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> key <span class="token operator">=</span> <span class="token string gstring">&quot;a&quot;</span>
<span class="token keyword">def</span> m <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string gstring">&quot;<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">:</span> <span class="token string gstring">&quot;letter <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">]</span>     <span class="token comment">// 注释 1</span>

<span class="token keyword">assert</span> m<span class="token punctuation">[</span><span class="token string gstring">&quot;a&quot;</span><span class="token punctuation">]</span> <span class="token operator">==</span> null                   <span class="token comment">// 注释 2</span>
</code></pre></div><ul><li>注释 1 ：这个 Map 使用一个 GString 作为 Key 创建</li> <li>注释 2 ：当试图用 String Key 来获取值时，会获取不到，因为 Strings 和 GString 有不同的 hashCode 值</li></ul> <h3 id="_4-5-三个双引号的字符串"><a href="#_4-5-三个双引号的字符串" class="header-anchor">#</a> 4.5 三个双引号的字符串</h3> <p>三个引号的字符串的行为和双引号字符串一样，只是它们和三个单引号的字符串一样是多行的。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> name <span class="token operator">=</span> <span class="token string">'Groovy'</span>
<span class="token keyword">def</span> template <span class="token operator">=</span> <span class="token string gstring">&quot;&quot;&quot;
    Dear Mr <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span>,

    You're the winner of the lottery!

    Yours sincerly,

    Dave
&quot;&quot;&quot;</span>

<span class="token keyword">assert</span> template<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'Groovy'</span><span class="token punctuation">)</span>
</code></pre></div><p>在三个双引号的字符串中，双引号和单引号都不需要转义。</p> <h3 id="_4-6-斜杠字符串"><a href="#_4-6-斜杠字符串" class="header-anchor">#</a> 4.6 斜杠字符串</h3> <p>除了常用的引号字符串，Groovy 还提供了使用<code>/</code>作为开头和结尾定界符的斜杠字符串。斜杠字符串对于定义正则表达式和模式特别有用，因为不需要转义反斜杠。</p> <p>斜杠字符串的例子如下：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> fooPattern <span class="token operator">=</span> <span class="token string regex">/.*foo.*/</span>
<span class="token keyword">assert</span> fooPattern <span class="token operator">==</span> <span class="token string">'.*foo.*'</span>
</code></pre></div><p>只有正斜杠需要用反斜杠来转义：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> escapeSlash <span class="token operator">=</span> <span class="token string regex">/The character \/ is a forward slash/</span>
<span class="token keyword">assert</span> escapeSlash <span class="token operator">==</span> <span class="token string">'The character / is a forward slash'</span>
</code></pre></div><p>斜杠字符串可以多行表示：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> multilineSlashy <span class="token operator">=</span> <span class="token operator">/</span>one
    two
    three<span class="token operator">/</span>

<span class="token keyword">assert</span> multilineSlashy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
</code></pre></div><p>斜杠字符串可以被认为是定义 GString 的另一种方式，但具有不同的转义规则。并且它们也是支持插值表达式的：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> color <span class="token operator">=</span> <span class="token string">'blue'</span>
<span class="token keyword">def</span> interpolatedSlashy <span class="token operator">=</span> <span class="token string regex">/a <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>color<span class="token punctuation">}</span></span> car/</span>

<span class="token keyword">assert</span> interpolatedSlashy <span class="token operator">==</span> <span class="token string">'a blue car'</span>
</code></pre></div><h4 id="_4-6-1-特殊情况"><a href="#_4-6-1-特殊情况" class="header-anchor">#</a> 4.6.1 特殊情况</h4> <p>一个空的斜线字符串不能用双斜杠表示，因为 Groovy 解析器将其理解为行注释。这就是下面的断言不会被编译的原因，因为它看起来像一行没有结束语句：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">assert</span> <span class="token string">''</span> <span class="token operator">==</span> <span class="token comment">//</span>
</code></pre></div><p>由于斜杠字符串的设计主要是为了让正则更容易，所以一些在 GStrings 中出错的东西，如<code>$()</code>或<code>$5</code>，都可以用斜杠字符串来处理。</p> <p>请记住，反斜杠不需要转义，或者说不支持转义。斜杠字符<code>/\t/</code>不会是<code>\t</code>，而是在字符 &quot;t &quot;后面加上一个反斜杠。转义只允许对斜线字符进行转义，即<code>/\/folder/</code>将是一个值<code>/folder</code>的斜线字符串。斜杠转义的结果是，斜杠字符串不能以<code>\</code>结束。否则，这将会转义斜杠字符串的结束符。你可以使用一个特殊的技巧，<code>/ends with slash ${'\'}/</code>。但在这种情况下，最好的做法还是避免使用斜杠字符串。</p> <h3 id="_4-7-美元符斜杠字符串"><a href="#_4-7-美元符斜杠字符串" class="header-anchor">#</a> 4.7 美元符斜杠字符串</h3> <p>美元符斜杠字符串是以<code>$/</code>开头和<code>/$</code>结尾的多行 GStrings 。转义字符是美元符号，它可以转义另一个<code>$</code>或<code>/</code>。但是<code>$</code>和<code>/</code>都不需要转义，除非是转义一个字符串子序列的<code>$</code>，这个序列的开头是一个 GString 占位符序列，或者你需要转义一个序列，这个序列的开头是一个关闭的美元斜杠字符串定界符。</p> <p>下面展示了一个例子：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> name <span class="token operator">=</span> <span class="token string gstring">&quot;Guillaume&quot;</span>
<span class="token keyword">def</span> date <span class="token operator">=</span> <span class="token string gstring">&quot;April, 1st&quot;</span>

<span class="token keyword">def</span> dollarSlashy <span class="token operator">=</span> <span class="token string gstring">$/
    Hello <span class="token expression"><span class="token punctuation">$</span>name</span>,
    today we're <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>date<span class="token punctuation">}</span></span>.

    $ dollar sign
    $$ escaped dollar sign
    \ backslash
    / forward slash
    $/ escaped forward slash
    $$$/ escaped opening dollar slashy
    $/$$ escaped closing dollar slashy
/$</span>

<span class="token keyword">assert</span> <span class="token punctuation">[</span>
    <span class="token string">'Guillaume'</span><span class="token punctuation">,</span>
    <span class="token string">'April, 1st'</span><span class="token punctuation">,</span>
    <span class="token string">'$ dollar sign'</span><span class="token punctuation">,</span>
    <span class="token string">'$ escaped dollar sign'</span><span class="token punctuation">,</span>
    <span class="token string">'\\ backslash'</span><span class="token punctuation">,</span>
    <span class="token string">'/ forward slash'</span><span class="token punctuation">,</span>
    <span class="token string">'/ escaped forward slash'</span><span class="token punctuation">,</span>
    <span class="token string">'$/ escaped opening dollar slashy'</span><span class="token punctuation">,</span>
    <span class="token string">'/$ escaped closing dollar slashy'</span>
<span class="token punctuation">]</span><span class="token punctuation">.</span>every <span class="token punctuation">{</span> dollarSlashy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre></div><p>它的创建是为了克服一些斜线字符串转义规则的限制。当它的转义规则适合你的字符串内容时，就可以使用它（通常是当它包含一些你不想转义的斜杠时）。</p> <h3 id="_4-8-字符串总结"><a href="#_4-8-字符串总结" class="header-anchor">#</a> 4.8 字符串总结</h3> <table><thead><tr><th>字符串名称</th> <th>语法</th> <th>支持插值表达式</th> <th>多行</th> <th>转义字符</th></tr></thead> <tbody><tr><td>单引号字符串</td> <td><code>'...'</code></td> <td></td> <td></td> <td><code>\</code></td></tr> <tr><td>三单引号字符串</td> <td><code>'''...'''</code></td> <td></td> <td>✔️</td> <td><code>\</code></td></tr> <tr><td>双引号字符串</td> <td><code>&quot;...&quot;</code></td> <td>✔️</td> <td></td> <td><code>\</code></td></tr> <tr><td>三双引号字符串</td> <td><code>&quot;&quot;&quot;...&quot;&quot;&quot;</code></td> <td>✔️</td> <td>✔️</td> <td><code>\</code></td></tr> <tr><td>斜杠字符串</td> <td><code>/.../</code></td> <td>✔️</td> <td>✔️</td> <td><code>\</code></td></tr> <tr><td>美元符斜杠字符串</td> <td><code>$/.../$</code></td> <td>✔️</td> <td>✔️</td> <td><code>$</code></td></tr></tbody></table> <h3 id="_4-9-字符"><a href="#_4-9-字符" class="header-anchor">#</a> 4.9 字符</h3> <p>与 Java 不同，Groovy 没有明确的字符文字（Java 使用单引号表示字符，双引号表示字符串；但 Groovy 中单引号和双引号均是字符串）。然而，你可以通过三种不同的方式，将 Groovy 字符串明确为一个实际的字符。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">char</span> c1 <span class="token operator">=</span> <span class="token string">'A'</span> <span class="token comment">// 方法 1</span>
<span class="token keyword">assert</span> c1 <span class="token keyword">instanceof</span> <span class="token class-name">Character</span>

<span class="token keyword">def</span> c2 <span class="token operator">=</span> <span class="token string">'B'</span> <span class="token keyword">as</span> <span class="token keyword">char</span> <span class="token comment">// 方法 2</span>
<span class="token keyword">assert</span> c2 <span class="token keyword">instanceof</span> <span class="token class-name">Character</span>

<span class="token keyword">def</span> c3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token string">'C'</span> <span class="token comment">// 方法 3</span>
<span class="token keyword">assert</span> c3 <span class="token keyword">instanceof</span> <span class="token class-name">Character</span>
</code></pre></div><ul><li>方法 1 ：显示指定 char 类型</li> <li>方法 2 ：通过使用 as 操作符的类型转换法</li> <li>方法 3 ：通过使用强转操作</li></ul> <p>当字符被保存在一个变量中时，第一种方法更优，而当一个 char 值必须作为方法调用的参数传递时，其他两个选项（2和3）更好。</p> <h2 id="_5-number"><a href="#_5-number" class="header-anchor">#</a> 5. Number</h2> <p>Groovy支持不同类型的整数和小数，并有 Java 常用的 Number 类型支持。</p> <h3 id="_5-1-整数"><a href="#_5-1-整数" class="header-anchor">#</a> 5.1 整数</h3> <p>整数类型和 Java 一样：</p> <ul><li><code>byte</code></li> <li><code>char</code></li> <li><code>short</code></li> <li><code>int</code></li> <li><code>long</code></li> <li><code>java.lang.BigInteger</code></li></ul> <p>你可以用下面的声明创建这些类型的整数：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">// primitive types</span>
<span class="token keyword">byte</span>  b <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">char</span>  c <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">short</span> s <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">int</span>   i <span class="token operator">=</span> <span class="token number">4</span>
<span class="token keyword">long</span>  l <span class="token operator">=</span> <span class="token number">5</span>

<span class="token comment">// infinite precision</span>
BigInteger bi <span class="token operator">=</span>  <span class="token number">6</span>
</code></pre></div><p>如果你通过使用<code>def</code>关键字来使用可选的输入法，那么数字的类型就会有所不同：它会自动选择合适的类型。</p> <p>对于正数：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">assert</span> a <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span>

<span class="token comment">// Integer.MAX_VALUE</span>
<span class="token keyword">def</span> b <span class="token operator">=</span> <span class="token number">2147483647</span>
<span class="token keyword">assert</span> b <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span>

<span class="token comment">// Integer.MAX_VALUE + 1</span>
<span class="token keyword">def</span> c <span class="token operator">=</span> <span class="token number">2147483648</span>
<span class="token keyword">assert</span> c <span class="token keyword">instanceof</span> <span class="token class-name">Long</span>

<span class="token comment">// Long.MAX_VALUE</span>
<span class="token keyword">def</span> d <span class="token operator">=</span> <span class="token number">9223372036854775807</span>
<span class="token keyword">assert</span> d <span class="token keyword">instanceof</span> <span class="token class-name">Long</span>

<span class="token comment">// Long.MAX_VALUE + 1</span>
<span class="token keyword">def</span> e <span class="token operator">=</span> <span class="token number">9223372036854775808</span>
<span class="token keyword">assert</span> e <span class="token keyword">instanceof</span> <span class="token class-name">BigInteger</span>
</code></pre></div><p>对于负数：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> na <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token keyword">assert</span> na <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span>

<span class="token comment">// Integer.MIN_VALUE</span>
<span class="token keyword">def</span> nb <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2147483648</span>
<span class="token keyword">assert</span> nb <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span>

<span class="token comment">// Integer.MIN_VALUE - 1</span>
<span class="token keyword">def</span> nc <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2147483649</span>
<span class="token keyword">assert</span> nc <span class="token keyword">instanceof</span> <span class="token class-name">Long</span>

<span class="token comment">// Long.MIN_VALUE</span>
<span class="token keyword">def</span> nd <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">9223372036854775808</span>
<span class="token keyword">assert</span> nd <span class="token keyword">instanceof</span> <span class="token class-name">Long</span>

<span class="token comment">// Long.MIN_VALUE - 1</span>
<span class="token keyword">def</span> ne <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">9223372036854775809</span>
<span class="token keyword">assert</span> ne <span class="token keyword">instanceof</span> <span class="token class-name">BigInteger</span>
</code></pre></div><h4 id="_5-1-1-其他进制"><a href="#_5-1-1-其他进制" class="header-anchor">#</a> 5.1.1 其他进制</h4> <p>数字也可以用二进制、八进制、十六进制和十进制来表示。</p> <h5 id="二进制"><a href="#二进制" class="header-anchor">#</a> 二进制</h5> <p>二进制数字以<code>0b</code>前缀开始：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">int</span> xInt <span class="token operator">=</span> <span class="token number">0b10101111</span>
<span class="token keyword">assert</span> xInt <span class="token operator">==</span> <span class="token number">175</span>

<span class="token keyword">short</span> xShort <span class="token operator">=</span> <span class="token number">0b11001001</span>
<span class="token keyword">assert</span> xShort <span class="token operator">==</span> <span class="token number">201</span> <span class="token keyword">as</span> <span class="token keyword">short</span>

<span class="token keyword">byte</span> xByte <span class="token operator">=</span> <span class="token number">0b11</span>
<span class="token keyword">assert</span> xByte <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">as</span> <span class="token keyword">byte</span>

<span class="token keyword">long</span> xLong <span class="token operator">=</span> <span class="token number">0b101101101101</span>
<span class="token keyword">assert</span> xLong <span class="token operator">==</span> <span class="token number">2925l</span>

BigInteger xBigInteger <span class="token operator">=</span> <span class="token number">0b111100100001</span>
<span class="token keyword">assert</span> xBigInteger <span class="token operator">==</span> <span class="token number">3873g</span>

<span class="token keyword">int</span> xNegativeInt <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0b10101111</span>
<span class="token keyword">assert</span> xNegativeInt <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">175</span>
</code></pre></div><h5 id="八进制"><a href="#八进制" class="header-anchor">#</a> 八进制</h5> <p>八进制以<code>0</code>作为前缀</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">int</span> xInt <span class="token operator">=</span> <span class="token number">077</span>
<span class="token keyword">assert</span> xInt <span class="token operator">==</span> <span class="token number">63</span>

<span class="token keyword">short</span> xShort <span class="token operator">=</span> <span class="token number">011</span>
<span class="token keyword">assert</span> xShort <span class="token operator">==</span> <span class="token number">9</span> <span class="token keyword">as</span> <span class="token keyword">short</span>

<span class="token keyword">byte</span> xByte <span class="token operator">=</span> <span class="token number">032</span>
<span class="token keyword">assert</span> xByte <span class="token operator">==</span> <span class="token number">26</span> <span class="token keyword">as</span> <span class="token keyword">byte</span>

<span class="token keyword">long</span> xLong <span class="token operator">=</span> <span class="token number">0246</span>
<span class="token keyword">assert</span> xLong <span class="token operator">==</span> <span class="token number">166l</span>

BigInteger xBigInteger <span class="token operator">=</span> <span class="token number">01111</span>
<span class="token keyword">assert</span> xBigInteger <span class="token operator">==</span> <span class="token number">585g</span>

<span class="token keyword">int</span> xNegativeInt <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">077</span>
<span class="token keyword">assert</span> xNegativeInt <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">63</span>
</code></pre></div><h5 id="十六进制"><a href="#十六进制" class="header-anchor">#</a> 十六进制</h5> <p>十六进制以<code>0x</code>作为前缀</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">int</span> xInt <span class="token operator">=</span> <span class="token number">0x77</span>
<span class="token keyword">assert</span> xInt <span class="token operator">==</span> <span class="token number">119</span>

<span class="token keyword">short</span> xShort <span class="token operator">=</span> <span class="token number">0xaa</span>
<span class="token keyword">assert</span> xShort <span class="token operator">==</span> <span class="token number">170</span> <span class="token keyword">as</span> <span class="token keyword">short</span>

<span class="token keyword">byte</span> xByte <span class="token operator">=</span> <span class="token number">0x3a</span>
<span class="token keyword">assert</span> xByte <span class="token operator">==</span> <span class="token number">58</span> <span class="token keyword">as</span> <span class="token keyword">byte</span>

<span class="token keyword">long</span> xLong <span class="token operator">=</span> <span class="token number">0xffff</span>
<span class="token keyword">assert</span> xLong <span class="token operator">==</span> <span class="token number">65535l</span>

BigInteger xBigInteger <span class="token operator">=</span> <span class="token number">0xaaaa</span>
<span class="token keyword">assert</span> xBigInteger <span class="token operator">==</span> <span class="token number">43690g</span>

Double xDouble <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token string">'0x1.0p0'</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> xDouble <span class="token operator">==</span> <span class="token number">1.0d</span>

<span class="token keyword">int</span> xNegativeInt <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0x77</span>
<span class="token keyword">assert</span> xNegativeInt <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">119</span>
</code></pre></div><h3 id="_5-2-小数"><a href="#_5-2-小数" class="header-anchor">#</a> 5.2 小数</h3> <p>小数类型与 Java 中相同：</p> <ul><li><code>floagt</code></li> <li><code>double</code></li> <li><code>java.lang.BigDecimal</code></li></ul> <p>你可以通过以下声明创建这些类型的小数：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">// primitive types</span>
<span class="token keyword">float</span>  f <span class="token operator">=</span> <span class="token number">1.234</span>
<span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token number">2.345</span>

<span class="token comment">// infinite precision</span>
BigDecimal bd <span class="token operator">=</span>  <span class="token number">3.456</span>
</code></pre></div><p>小数可以使用指数表达，指数字母为<code>e</code>或<code>E</code>，后面是正负号（可选），再跟着一个代表指数的整数：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">assert</span> <span class="token number">1e3</span>  <span class="token operator">==</span>  <span class="token number">1_000.0</span>
<span class="token keyword">assert</span> <span class="token number">2E4</span>  <span class="token operator">==</span> <span class="token number">20_000.0</span>
<span class="token keyword">assert</span> <span class="token number">3e+1</span> <span class="token operator">==</span>     <span class="token number">30.0</span>
<span class="token keyword">assert</span> <span class="token number">4E-2</span> <span class="token operator">==</span>      <span class="token number">0.04</span>
<span class="token keyword">assert</span> <span class="token number">5e-1</span> <span class="token operator">==</span>      <span class="token number">0.5</span>
</code></pre></div><p>为了方便进行精确的小数计算，Groovy 选用<code>java.lang.BigDecimal</code>作为其十进制数类型。此外，<code>float</code>和<code>double</code>都被支持，但需要明确的类型声明、类型强转或使用[类型后缀](./### 5.4 数字类型后缀)。即使<code>BigDecimal</code>是十进制数的默认类型，在采用<code>float</code>或 <code>double</code>作为参数类型的方法或闭包中，也可以接受这种类型。</p> <p>小数不能用二进制、八进制或十六进制表示。</p> <h3 id="_5-3-下划线"><a href="#_5-3-下划线" class="header-anchor">#</a> 5.3 下划线</h3> <p>在写长的文字数字时，眼睛比较难看出一些数字是如何分组的。可以在数字字面量中通过下划线<code>_</code>来进行区分：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">long</span> creditCardNumber <span class="token operator">=</span> <span class="token number">1234_5678_9012_3456L</span>
<span class="token keyword">long</span> socialSecurityNumbers <span class="token operator">=</span> <span class="token number">999_99_9999L</span>
<span class="token keyword">double</span> monetaryAmount <span class="token operator">=</span> <span class="token number">12_345_132.12</span>
<span class="token keyword">long</span> hexBytes <span class="token operator">=</span> <span class="token number">0xFF_EC_DE_5E</span>
<span class="token keyword">long</span> hexWords <span class="token operator">=</span> <span class="token number">0xFFEC_DE5E</span>
<span class="token keyword">long</span> maxLong <span class="token operator">=</span> <span class="token number">0x7fff_ffff_ffff_ffffL</span>
<span class="token keyword">long</span> alsoMaxLong <span class="token operator">=</span> <span class="token number">9_223_372_036_854_775_807L</span>
<span class="token keyword">long</span> bytes <span class="token operator">=</span> <span class="token number">0b11010010_01101001_10010100_10010010</span>
</code></pre></div><h3 id="_5-4-数字类型后缀"><a href="#_5-4-数字类型后缀" class="header-anchor">#</a> 5.4 数字类型后缀</h3> <p>我们可以通过给出一个后缀（见下表）来强制一个数字（包括二进制、八进制和十六进制）有一个特定的类型（后缀不区分大小写）。</p> <table><thead><tr><th>类型</th> <th>后缀</th></tr></thead> <tbody><tr><td>BigInteger</td> <td><code>G</code>或<code>g</code></td></tr> <tr><td>Long</td> <td><code>L</code>或<code>l</code></td></tr> <tr><td>Integer</td> <td><code>I</code>或<code>i</code></td></tr> <tr><td>BigDecimal</td> <td><code>G</code>或<code>g</code></td></tr> <tr><td>Double</td> <td><code>D</code>或<code>d</code></td></tr> <tr><td>Float</td> <td><code>F</code>或<code>f</code></td></tr></tbody></table> <p>举例：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">assert</span> <span class="token number">42I</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token string">'42'</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> <span class="token number">42i</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token string">'42'</span><span class="token punctuation">)</span> <span class="token comment">// lowercase i more readable</span>
<span class="token keyword">assert</span> <span class="token number">123L</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">Long</span><span class="token punctuation">(</span><span class="token string gstring">&quot;123&quot;</span><span class="token punctuation">)</span> <span class="token comment">// uppercase L more readable</span>
<span class="token keyword">assert</span> <span class="token number">2147483648</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">Long</span><span class="token punctuation">(</span><span class="token string">'2147483648'</span><span class="token punctuation">)</span> <span class="token comment">// Long type used, value too large for an Integer</span>
<span class="token keyword">assert</span> <span class="token number">456G</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">'456'</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> <span class="token number">456g</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">'456'</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> <span class="token number">123.45</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">'123.45'</span><span class="token punctuation">)</span> <span class="token comment">// default BigDecimal type used</span>
<span class="token keyword">assert</span> <span class="token number">1.200065D</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token string">'1.200065'</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> <span class="token number">1.234F</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token string">'1.234'</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> <span class="token number">1.23E23D</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token string">'1.23E23'</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> <span class="token number">0b1111L</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> Long <span class="token comment">// binary</span>
<span class="token keyword">assert</span> <span class="token number">0xFFi</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> Integer <span class="token comment">// hexadecimal</span>
<span class="token keyword">assert</span> <span class="token number">034G</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> BigInteger <span class="token comment">// octal</span>
</code></pre></div><h3 id="_5-5-数学运算"><a href="#_5-5-数学运算" class="header-anchor">#</a> 5.5 数学运算</h3> <p>虽然后面会讲到<a href="http://www.groovy-lang.org/syntax.html#_operators" target="_blank" rel="noopener noreferrer">运算符<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，但讨论数学运算的行为以及它们的结果类型是什么很重要。</p> <p>除法和幂运算暂不介绍（后文将介绍）。</p> <ul><li>在<code>byte</code>、<code>char</code>、<code>short</code>和<code>int</code>之间进行二元运算的结果是<code>int</code></li> <li>在<code>long</code>与<code>byte</code>、<code>char</code>、<code>short</code>和<code>int</code>之间进行二元运算的结果是<code>long</code></li> <li>在<code>BigInteger</code>和任何其他整数类型的二元运算结果是<code>BigInteger</code></li> <li>涉及<code>BigDecimal</code>的二元运算，有<code>byte</code>、<code>char</code>、<code>short</code>、<code>int</code>和<code>BigInteger</code>，结果是<code>BigDecimal</code></li> <li>在<code>float</code>、<code>double</code>和<code>BigDecimal</code>之间进行二元运算，结果是<code>double</code></li> <li>两个<code>BigDecimal</code>之间的二元运算结果为<code>BigDecimal</code></li></ul> <p>下表概述了这些规则：</p> <table><thead><tr><th></th> <th>byte</th> <th>char</th> <th>short</th> <th>int</th> <th>long</th> <th>BigInteger</th> <th>float</th> <th>double</th> <th>BigDecimal</th></tr></thead> <tbody><tr><td>byte</td> <td>int</td> <td>int</td> <td>int</td> <td>int</td> <td>long</td> <td>BigInteger</td> <td>double</td> <td>double</td> <td>BigDecimal</td></tr> <tr><td>char</td> <td></td> <td>int</td> <td>int</td> <td>int</td> <td>long</td> <td>BigInteger</td> <td>double</td> <td>double</td> <td>BigDecimal</td></tr> <tr><td>short</td> <td></td> <td></td> <td>int</td> <td>int</td> <td>long</td> <td>BigInteger</td> <td>double</td> <td>double</td> <td>BigDecimal</td></tr> <tr><td>int</td> <td></td> <td></td> <td></td> <td>int</td> <td>long</td> <td>BigInteger</td> <td>double</td> <td>double</td> <td>BigDecimal</td></tr> <tr><td>long</td> <td></td> <td></td> <td></td> <td></td> <td>long</td> <td>BigInteger</td> <td>double</td> <td>double</td> <td>BigDecimal</td></tr> <tr><td>BigInteger</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td>BigInteger</td> <td>double</td> <td>double</td> <td>BigDecimal</td></tr> <tr><td>float</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td>double</td> <td>double</td> <td>double</td></tr> <tr><td>double</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td>double</td> <td>double</td></tr> <tr><td>BigDecimal</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td>BigDecimal</td></tr></tbody></table> <p>由于 Groovy 的运算符重载，通常的算术运算符在<code>BigInteger</code>和<code>BigDecimal</code>中也能很好地工作，不像在 Java 中，你必须使用显式方法调用对这些数字进行操作。</p> <h4 id="_5-5-1-除法运算"><a href="#_5-5-1-除法运算" class="header-anchor">#</a> 5.5.1 除法运算</h4> <p>如果操作数是<code>float</code>或<code>double</code>，除法运算符<code>/</code>（和<code>/=</code>用于除法和赋值）会产生一个<code>double</code>结果，否则会产生一个<code>BigDecimal</code>结果（当两个操作数都是<code>short</code>、<code>char</code>、<code>byte</code>、<code>int</code>、<code>long</code>、<code>BigInteger</code>或<code>BigDecimal</code>类型的任意组合）。</p> <p>如果除法是精确的（即产生的结果可以在相同精度和比例的范围内表示），或者使用<code>MathContext</code>，<a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#precision()" target="_blank" rel="noopener noreferrer">精度<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>为两个操作数精度的最大值加上一个额外的10的精度，<a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#scale()" target="_blank" rel="noopener noreferrer">比例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>为10的最大值和操作数比例的最大值，则使用<code>divide()</code>方法进行<code>BigDecimal</code>除法。</p> <p>对于像 Java 中的整数除法，你应该使用<code>intdiv()</code>方法，因为 Groovy 没有提供专门的整数除法运算符符号。</p> <h4 id="_5-5-2-幂运算"><a href="#_5-5-2-幂运算" class="header-anchor">#</a> 5.5.2 幂运算</h4> <p>幂运算用<code>**</code>运算符表示，有两个参数：基数和指数。幂运算的结果取决于它的操作数和运算结果（特别是如果结果可以用积分值表示）。</p> <p>Groovy 的幂运算使用以下规则来确定结果类型：</p> <ul><li>如果指数是小数
<ul><li>如果结果可以用<code>Integer</code>表示，则返回一个<code>Integer</code></li> <li>否则，如果结果可以用<code>Long</code>表示，则返回一个<code>Long</code></li> <li>否则返回一个<code>Double</code></li></ul></li> <li>如果指数是整数
<ul><li>如果指数是严格的负数，那么返回一个<code>Integer</code>、<code>Long</code>或<code>Double</code>（如果结果值适合该类型）</li> <li>如果指数是正数或零
<ul><li>如果基数是<code>BigDecimal</code>，则返回一个<code>BigDecimal</code>结果值</li> <li>如果基数是<code>BigInteger</code>，则返回一个<code>BigInteger</code>结果值</li> <li>如果基数是一个<code>Integer</code>，那么如果结果值适合，则返回一个<code>Integer</code>，否则返回一个<code>BigInteger</code></li> <li>如果基数是<code>Long</code>，结果合适的话，则返回一个<code>Long</code>，否则返回一个<code>BigInteger</code></li></ul></li></ul></li></ul> <p>我们可以用几个例子来说明这些规则：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">// base and exponent are ints and the result can be represented by an Integer</span>
<span class="token keyword">assert</span>    <span class="token number">2</span>    <span class="token operator">**</span>   <span class="token number">3</span>    <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span>    <span class="token comment">//  8</span>
<span class="token keyword">assert</span>   <span class="token number">10</span>    <span class="token operator">**</span>   <span class="token number">9</span>    <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span>    <span class="token comment">//  1_000_000_000</span>

<span class="token comment">// the base is a long, so fit the result in a Long</span>
<span class="token comment">// (although it could have fit in an Integer)</span>
<span class="token keyword">assert</span>    <span class="token number">5L</span>   <span class="token operator">**</span>   <span class="token number">2</span>    <span class="token keyword">instanceof</span> <span class="token class-name">Long</span>       <span class="token comment">//  25</span>

<span class="token comment">// the result can't be represented as an Integer or Long, so return a BigInteger</span>
<span class="token keyword">assert</span>  <span class="token number">100</span>    <span class="token operator">**</span>  <span class="token number">10</span>    <span class="token keyword">instanceof</span> <span class="token class-name">BigInteger</span> <span class="token comment">//  10e20</span>
<span class="token keyword">assert</span> <span class="token number">1234</span>    <span class="token operator">**</span> <span class="token number">123</span>    <span class="token keyword">instanceof</span> <span class="token class-name">BigInteger</span> <span class="token comment">//  170515806212727042875...</span>

<span class="token comment">// the base is a BigDecimal and the exponent a negative int</span>
<span class="token comment">// but the result can be represented as an Integer</span>
<span class="token keyword">assert</span>    <span class="token number">0.5</span>  <span class="token operator">**</span>  <span class="token operator">-</span><span class="token number">2</span>    <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span>    <span class="token comment">//  4</span>

<span class="token comment">// the base is an int, and the exponent a negative float</span>
<span class="token comment">// but again, the result can be represented as an Integer</span>
<span class="token keyword">assert</span>    <span class="token number">1</span>    <span class="token operator">**</span>  <span class="token operator">-</span><span class="token number">0.3f</span> <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span>    <span class="token comment">//  1</span>

<span class="token comment">// the base is an int, and the exponent a negative int</span>
<span class="token comment">// but the result will be calculated as a Double</span>
<span class="token comment">// (both base and exponent are actually converted to doubles)</span>
<span class="token keyword">assert</span>   <span class="token number">10</span>    <span class="token operator">**</span>  <span class="token operator">-</span><span class="token number">1</span>    <span class="token keyword">instanceof</span> <span class="token class-name">Double</span>     <span class="token comment">//  0.1</span>

<span class="token comment">// the base is a BigDecimal, and the exponent is an int, so return a BigDecimal</span>
<span class="token keyword">assert</span>    <span class="token number">1.2</span>  <span class="token operator">**</span>  <span class="token number">10</span>    <span class="token keyword">instanceof</span> <span class="token class-name">BigDecimal</span> <span class="token comment">//  6.1917364224</span>

<span class="token comment">// the base is a float or double, and the exponent is an int</span>
<span class="token comment">// but the result can only be represented as a Double value</span>
<span class="token keyword">assert</span>    <span class="token number">3.4f</span> <span class="token operator">**</span>   <span class="token number">5</span>    <span class="token keyword">instanceof</span> <span class="token class-name">Double</span>     <span class="token comment">//  454.35430372146965</span>
<span class="token keyword">assert</span>    <span class="token number">5.6d</span> <span class="token operator">**</span>   <span class="token number">2</span>    <span class="token keyword">instanceof</span> <span class="token class-name">Double</span>     <span class="token comment">//  31.359999999999996</span>

<span class="token comment">// the exponent is a decimal value</span>
<span class="token comment">// and the result can only be represented as a Double value</span>
<span class="token keyword">assert</span>    <span class="token number">7.8</span>  <span class="token operator">**</span>   <span class="token number">1.9</span>  <span class="token keyword">instanceof</span> <span class="token class-name">Double</span>     <span class="token comment">//  49.542708423868476</span>
<span class="token keyword">assert</span>    <span class="token number">2</span>    <span class="token operator">**</span>   <span class="token number">0.1f</span> <span class="token keyword">instanceof</span> <span class="token class-name">Double</span>     <span class="token comment">//  1.0717734636432956</span>
</code></pre></div><h2 id="_6-boolean"><a href="#_6-boolean" class="header-anchor">#</a> 6. Boolean</h2> <p>布尔型是一种特殊的数据类型，用于表示真值：<code>true</code>和<code>false</code>。使用这种数据类型来追踪真/假<a href="%E5%B8%83%E5%B0%94%E5%9E%8B%E6%98%AF%E4%B8%80%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%8C%E7%94%A8%E4%BA%8E%E8%A1%A8%E7%A4%BA%E7%9C%9F%E5%80%BC%EF%BC%9A%E7%9C%9F%E5%92%8C%E5%81%87%E3%80%82%E4%BD%BF%E7%94%A8%E8%BF%99%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%9D%A5%E8%BF%BD%E8%B8%AA%E7%9C%9F/%E5%81%87%E6%9D%A1%E4%BB%B6%E7%9A%84%E7%AE%80%E5%8D%95%E6%A0%87%E5%BF%97%E3%80%82">条件</a>的简单标志。</p> <p>布尔值可以存储在变量中，指定到字段中，就像任何其他数据类型一样：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> myBooleanVariable <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token keyword">boolean</span> untypedBooleanVar <span class="token operator">=</span> <span class="token boolean">false</span>
booleanField <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><p><code>true</code>和<code>false</code>是唯一的两个原始布尔值。但更复杂的布尔表达式可以用<a href="http://www.groovy-lang.org/syntax.html#_bitwise_and_logical_operators" target="_blank" rel="noopener noreferrer">逻辑运算符<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来表示。</p> <p>此外，Groovy 有<a href="https://docs.groovy-lang.org/latest/html/documentation/core-semantics.html#Groovy-Truth" target="_blank" rel="noopener noreferrer">特殊的规则<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（通常被称为 Groovy Truth ），用于将非布尔对象转换为布尔值。</p> <h2 id="_7-list"><a href="#_7-list" class="header-anchor">#</a> 7. List</h2> <p>Groovy 使用逗号分隔 List 的值，并用方括号括起来。Groovy 的 List 是 <code>java.util.List</code>，因为Groovy没有定义自己的集合类。在定义 List 变量时使用的具体列表实现默认是<code>java.util.ArrayList</code>，除非你另行指定（后面会介绍）。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>          <span class="token comment">// 注释 1   </span>

<span class="token keyword">assert</span> numbers <span class="token keyword">instanceof</span> <span class="token class-name">List</span>   <span class="token comment">// 注释 2</span>
<span class="token keyword">assert</span> numbers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span>       <span class="token comment">// 注释 3</span>
</code></pre></div><ul><li>注释 1 ：以逗号为分隔符，并用方括号括起来定义一个 List，并将该 List 赋值到一个变量中</li> <li>注释 2 ：该 List 是 Java 的 <code>java.util.List</code>接口的一个实例</li> <li>注释 3 ：List 的长度可以用<code>size()</code>方法查询，显示该 List 包含3个元素</li></ul> <p>在上面的例子中，我们使用的是元素类型相同的列表，你也可以创建元素类型不同的列表：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> heterogeneous <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string gstring">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span>   <span class="token comment">// 注释 1</span>
</code></pre></div><ul><li>注释 1 ：	该 List 中包含一个数字、一个字符串和一个布尔值</li></ul> <p>上文提到，在默认情况下，List 实际上是<code>java.util.ArrayList</code>的实例，但可以使用<code>as</code>操作符实现类型强转，或者进行显式类型声明，都可以让 List 支持不同的类型：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> arrayList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">assert</span> arrayList <span class="token keyword">instanceof</span> <span class="token class-name">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ArrayList</span>

<span class="token keyword">def</span> linkedList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token keyword">as</span> LinkedList    <span class="token comment">// 注释 1</span>
<span class="token keyword">assert</span> linkedList <span class="token keyword">instanceof</span> <span class="token class-name">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>LinkedList</span>

LinkedList otherLinked <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>          <span class="token comment">// 注释 2        </span>
<span class="token keyword">assert</span> otherLinked <span class="token keyword">instanceof</span> <span class="token class-name">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>LinkedList</span>
</code></pre></div><ul><li>注释 1 ：使用<code>as</code>操作符将类型强转为<code>java.util.LinkedList</code></li> <li>注释 2 ：显示声明类型为 <code>LinkedList</code></li></ul> <p>你可以用<code>[]</code>下标操作符访问列表中的元素（无论是读值还是设值），负数表示从列表末尾访问元素。也可以用范围来访问，并使用<code>&lt;&lt;</code>左移操作符将元素追加到列表中：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> letters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span>

<span class="token keyword">assert</span> letters<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'a'</span>     <span class="token comment">// 注释 1</span>
<span class="token keyword">assert</span> letters<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'b'</span>

<span class="token keyword">assert</span> letters<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'d'</span>    <span class="token comment">// 注释 2</span>
<span class="token keyword">assert</span> letters<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'c'</span>

letters<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'C'</span>             <span class="token comment">// 注释 3</span>
<span class="token keyword">assert</span> letters<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'C'</span>

letters <span class="token operator">&lt;&lt;</span> <span class="token string">'e'</span>               <span class="token comment">// 注释 4</span>
<span class="token keyword">assert</span> letters<span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'e'</span>
<span class="token keyword">assert</span> letters<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'e'</span>

<span class="token keyword">assert</span> letters<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span>         <span class="token comment">// 注释 5</span>
<span class="token keyword">assert</span> letters<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span>    <span class="token comment">// 注释 6</span>
</code></pre></div><ul><li>注释 1 ：访问列表的第一个元素(从 0 开始)</li> <li>注释 2 ：访问列表的最后一个元素。-1 表示列表最后一个元素</li> <li>注释 3 ：为列表的第三个元素设置一个新的值</li> <li>注释 4 ：使用<code>&lt;&lt;</code>左移操作符在列表末尾添加一个元素</li> <li>注释 5 ：同时访问两个元素，返回一个包含这两个元素的新列表</li> <li>注释 6 ：使用一个范围从列表中访问一个范围的值，从开始到结束的元素位置</li></ul> <p>由于列表可以是异构的，所以列表也可以包含其他列表，以创建多维列表：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> multi <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>     <span class="token comment">// 注释 1</span>
<span class="token keyword">assert</span> multi<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">2</span>          <span class="token comment">// 注释 2 </span>
</code></pre></div><ul><li>注释 1 ：定义一个嵌套的数字列表</li> <li>注释 2 ：访问最外层列表的第二个元素的第一个元素</li></ul> <h2 id="_8-arrays"><a href="#_8-arrays" class="header-anchor">#</a> 8. Arrays</h2> <p>Groovy 为定义数组也是使用和 List 一样的中括号和逗号，但要使它成为数组而不是列表，需要通过强制类型转换或显式类型声明来明确定义数组的类型。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>String<span class="token punctuation">[</span><span class="token punctuation">]</span> arrStr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Ananas'</span><span class="token punctuation">,</span> <span class="token string">'Banana'</span><span class="token punctuation">,</span> <span class="token string">'Kiwi'</span><span class="token punctuation">]</span>  <span class="token comment">// 注释 1</span>

<span class="token keyword">assert</span> arrStr <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment">// 注释 2</span>
<span class="token keyword">assert</span> <span class="token operator">!</span><span class="token punctuation">(</span>arrStr <span class="token keyword">instanceof</span> <span class="token class-name">List</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> numArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token comment">// 注释 3</span>

<span class="token keyword">assert</span> numArr <span class="token keyword">instanceof</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span>       <span class="token comment">// 注释 4</span>
<span class="token keyword">assert</span> numArr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span>
</code></pre></div><ul><li>注释 1：使用显式类型声明定义数组</li> <li>注释 2：断言``arrStr`是一个 String 数组</li> <li>注释 3：使用 <code>as</code>操作符创建一个数组</li> <li>注释 4：断言<code>numArr</code>是一个 int 数组</li></ul> <p>你也可以创建多维数组：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> matrix3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>   <span class="token comment">// 注释 1      </span>
<span class="token keyword">assert</span> matrix3<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span>

Integer<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix2               <span class="token comment">// 注释 2</span>
matrix2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token keyword">assert</span> matrix2 <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>注释 1：你可以定义一个数组的大小</li> <li>注释 2：也可以不指定数组大小</li></ul> <p>访问数组元素的方法与访问列表的方法相同：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>String<span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Cédric'</span><span class="token punctuation">,</span> <span class="token string">'Guillaume'</span><span class="token punctuation">,</span> <span class="token string">'Jochen'</span><span class="token punctuation">,</span> <span class="token string">'Paul'</span><span class="token punctuation">]</span>
<span class="token keyword">assert</span> names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Cédric'</span> <span class="token comment">// 注释 1    </span>

names<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Blackdrag'</span>      <span class="token comment">// 注释 2</span>
<span class="token keyword">assert</span> names<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Blackdrag'</span>
</code></pre></div><ul><li>注释 1：访问数组的第一个元素</li> <li>注释 2：给数组的第三个元素设置一个新值</li></ul> <p>Groovy 不支持使用大括号初始化数组，因为大括号会和 Groovy 的闭包产生歧义。</p> <h3 id="_8-1-java-风格的数组初始化"><a href="#_8-1-java-风格的数组初始化" class="header-anchor">#</a> 8.1  Java 风格的数组初始化</h3> <p>Groovy 一直支持使用方括号定义列表和数组，并避免使用 Java 风格的大括号，以免与闭包定义冲突。然而，如果大括号紧跟在数组类型声明之后，则不会与闭包定义产生歧义，所以现在也支持用 Java 风格的方式定义数组。</p> <p>举个栗子：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token keyword">def</span> primes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">}</span>
<span class="token keyword">assert</span> primes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> primes<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">28</span>
<span class="token keyword">assert</span> primes<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'[I'</span>

<span class="token keyword">def</span> pets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token string">'cat'</span><span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">}</span>
<span class="token keyword">assert</span> pets<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> pets<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'catdog'</span>
<span class="token keyword">assert</span> pets<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'[Ljava.lang.String;'</span>

<span class="token comment">// traditional Groovy alternative still supported</span>
String<span class="token punctuation">[</span><span class="token punctuation">]</span> groovyBooks <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'Groovy in Action'</span><span class="token punctuation">,</span> <span class="token string">'Making Java Groovy'</span> <span class="token punctuation">]</span>
<span class="token keyword">assert</span> groovyBooks<span class="token punctuation">.</span>every<span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'Groovy'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/juzi214032/groovy-chinese/edit/master/docs/language-specification/syntax.md" target="_blank" rel="noopener noreferrer">纠正错误</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/groovy-chinese/unfinished.html">
        操作符
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/groovy-chinese/assets/js/app.88613846.js" defer></script><script src="/groovy-chinese/assets/js/2.a885f705.js" defer></script><script src="/groovy-chinese/assets/js/7.95b99c1c.js" defer></script>
  </body>
</html>
